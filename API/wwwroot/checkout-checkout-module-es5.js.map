{"version":3,"sources":["webpack:///node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack:///src/app/checkout/checkout-address/checkout-address.component.ts","webpack:///src/app/checkout/checkout-address/checkout-address.component.html","webpack:///src/app/checkout/checkout-delivery/checkout-delivery.component.ts","webpack:///src/app/checkout/checkout-delivery/checkout-delivery.component.html","webpack:///src/app/checkout/checkout-payment/checkout-payment.component.html","webpack:///src/app/checkout/checkout-payment/checkout-payment.component.ts","webpack:///src/app/checkout/checkout-review/checkout-review.component.ts","webpack:///src/app/checkout/checkout-review/checkout-review.component.html","webpack:///src/app/checkout/checkout-routing.module.ts","webpack:///src/app/checkout/checkout-success/checkout-success.component.ts","webpack:///src/app/checkout/checkout-success/checkout-success.component.html","webpack:///src/app/checkout/checkout.component.ts","webpack:///src/app/checkout/checkout.component.html","webpack:///src/app/checkout/checkout.module.ts","webpack:///src/app/checkout/checkout.service.ts"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","findScript","scripts","document","querySelectorAll","concat","i","length","script","test","src","injectScript","params","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","registerWrapper","stripe","startTime","_registerWrapper","name","version","stripePromise","loadScript","Promise","resolve","reject","window","Stripe","console","warn","addEventListener","error","initStripe","maybeStripe","args","apply","undefined","stripePromise$1","then","loadCalled","err","loadStripe","_len","arguments","Array","_key","Date","now","CheckoutAddressComponent","accountService","toastrService","updateUserAddress","checkoutForm","get","value","subscribe","success","reset","selector","templateUrl","styleUrls","id","CheckoutDeliveryComponent","checkoutService","basketService","deliveryMethods","getDeliveryMethods","dm","setShippingPrice","CheckoutPaymentComponent","router","loading","elements","cardNumber","create","mount","cardNumberElement","nativeElement","on","event","cardErrors","message","cardExpiry","cardExpiryElement","cardCvc","cardCvcElement","basket","getCurrentBasketValue","createOrder","createdOrder","confirmPaymentWithStripe","paymentResult","paymentIntent","deleteLocalBasket","navigationExtras","state","navigate","log","result","confirmCardPayment","clientSecret","payment_method","card","billing_details","orderToCreate","getOrderToCreate","toPromise","deliveryMethod","shipToAddress","basketId","deliveryMethodId","submitOrder","CheckoutReviewComponent","createPaymentIntent","appStepper","next","routes","path","component","CheckoutRoutingModule","forChild","declarations","imports","exports","CheckoutSuccessComponent","navigation","getCurrentNavigation","order","extras","navigateByUrl","viewOrder","CheckoutComponent","fb","createCheckoutForm","getAddressFormValues","getDeliveryFormValue","group","addressForm","firstName","required","lastName","street","city","zipCode","deliveryForm","paymentForm","nameOnCard","getUserAddress","address","patchValue","toString","CheckoutModule","CheckoutService","http","baseUrl","apiUrl","pipe","sort","a","b","price","post","providedIn"],"mappings":"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","file":"checkout-checkout-module-es5.js","sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.54.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ToastrService } from 'ngx-toastr';\nimport { AccountService } from 'src/app/account/account.service';\n\n@Component({\n  selector: 'app-checkout-address',\n  templateUrl: './checkout-address.component.html',\n  styleUrls: ['./checkout-address.component.scss']\n})\nexport class CheckoutAddressComponent implements OnInit {\n  @Input() checkoutForm: FormGroup;\n  constructor(private accountService: AccountService, private toastrService: ToastrService) { }\n\n  ngOnInit(): void {\n  }\n\n  saveUserAddress() {\n    this.accountService.updateUserAddress(this.checkoutForm.get('addressForm')?.value).subscribe(() => {\n      this.toastrService.success('Address successfully updated.');\n      this.checkoutForm.get('addressForm')?.reset(this.checkoutForm.get('addressForm')?.value);\n    })\n  }\n\n}\n","<div class=\"mt-4\" *ngIf=\"checkoutForm\" [formGroup]=\"checkoutForm\" style=\"min-height: 350px\">\n    <div class=\"d-flex jusitify-content-between align-items-center\">\n        <button [disabled]=\"!checkoutForm.get('addressForm')?.valid || !checkoutForm.get('addressForm')?.dirty\" \n        (click)=\"saveUserAddress()\" class=\"btn btn-outline-success mb-3\">\n            Save as default address\n        </button>\n    </div>\n    <div class=\"row\" formGroupName=\"addressForm\">\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"firstName\" type=\"text\" class=\"form-control\" id=\"firstName\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.firstName')?.touched && checkoutForm.get('addressForm.firstName')?.invalid\"\n                    placeholder=\"First name\">\n                <label for=\"floatingInput\">First name</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.firstName')?.errors && checkoutForm.get('addressForm.firstName')?.errors['required'] === true\">\n                    First Name is required\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"lastName\" type=\"text\" class=\"form-control\" id=\"lastName\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.lastName')?.touched && checkoutForm.get('addressForm.lastName')?.invalid\"\n                    placeholder=\"Last name\">\n                <label for=\"floatingInput\">Last name</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.lastName')?.errors && checkoutForm.get('addressForm.lastName')?.errors['required'] === true\">\n                    Last Name is required\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"street\" type=\"text\" class=\"form-control\" id=\"street\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.street')?.touched && checkoutForm.get('addressForm.street')?.invalid\"\n                    placeholder=\"Street\">\n                <label for=\"floatingInput\">Street</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.street')?.errors && checkoutForm.get('addressForm.street')?.errors['required'] === true\">\n                    Street is required\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"city\" type=\"text\" class=\"form-control\" id=\"city\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.city')?.touched && checkoutForm.get('addressForm.city')?.invalid\"\n                    placeholder=\"City\">\n                <label for=\"floatingInput\">City</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.city')?.errors && checkoutForm.get('addressForm.city')?.errors['required'] === true\">\n                    City is required\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"state\" type=\"text\" class=\"form-control\" id=\"state\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.state')?.touched && checkoutForm.get('addressForm.state')?.invalid\"\n                    placeholder=\"State\">\n                <label for=\"floatingInput\">State</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.state')?.errors && checkoutForm.get('addressForm.state')?.errors['required'] === true\">\n                    State is required\n                </div>\n            </div>\n        </div>\n\n        <div class=\"form-group col-6\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"zipCode\" type=\"text\" class=\"form-control\" id=\"zipCode\"\n                    [class.is-invalid]=\"checkoutForm.get('addressForm.zipCode')?.touched && checkoutForm.get('addressForm.zipCode')?.invalid\"\n                    placeholder=\"State\">\n                <label for=\"floatingInput\">Zip Code</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('addressForm.zipCode')?.errors && checkoutForm.get('addressForm.zipCode')?.errors['required'] === true\">\n                    ZipCode is required\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"d-flex justify-content-between flex-row mb-5\">\n    <button class=\"btn btn-outline-primary\" routerLink=\"/basket\">\n        <i class=\"fa fa-angle-left\"></i> Back to basket\n    </button>\n    <button [disabled]=\"checkoutForm.get('addressForm')?.invalid\" class=\"btn btn-primary\" cdkStepperNext>\n        Go to delivery <i class=\"fa fa-angle-right\"></i>\n    </button>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { IDeliveryMethod } from 'src/app/shared/models/deliveryMethod';\nimport { CheckoutService } from '../checkout.service';\nimport { BasketService } from 'src/app/basket/basket.service';\n\n@Component({\n  selector: 'app-checkout-delivery',\n  templateUrl: './checkout-delivery.component.html',\n  styleUrls: ['./checkout-delivery.component.scss']\n})\nexport class CheckoutDeliveryComponent implements OnInit {\n  @Input() checkoutForm: FormGroup;\n  deliveryMethods: IDeliveryMethod[] = [];\n  constructor(private checkoutService: CheckoutService, private basketService: BasketService) { }\n\n  ngOnInit(): void {\n    this.getDeliveryMethods();\n  }\n\n  getDeliveryMethods() {\n    this.checkoutService.getDeliveryMethods().subscribe(dm => {\n      this.deliveryMethods = dm;\n    })\n  }\n\n  setShippingPrice(dm: IDeliveryMethod) {\n    this.basketService.setShippingPrice(dm);\n  }\n\n}\n","<div class=\"mt-4\" *ngIf=\"checkoutForm\" [formGroup]=\"checkoutForm\" style=\"min-height: 350px\">\n    <div class=\"row\" formGroupName=\"deliveryForm\">\n        <div class=\"col-6 form-group\" *ngFor=\"let method of deliveryMethods\">\n            <input (click)=\"setShippingPrice(method)\" class=\"form-check-input\" type=\"radio\" value=\"{{method.id}}\"\n                id=\"{{method.id}}\" formControlName=\"deliveryMethod\" />\n            <label for=\"{{method.id}}\" class=\"form-check-label ms-2 mb-3\"><strong>{{method.shortname}} -\n                    {{method.price | currency}}</strong><br />\n                <span class=\"label-description\">{{method.description}}</span>\n            </label>\n        </div>\n    </div>\n</div>\n\n<div class=\"d-flex justify-content-between flex-row mb-5\">\n    <button class=\"btn btn-outline-primary\" cdkStepperPrevious>\n        <i class=\"fa fa-angle-left\"></i> Back to address\n    </button>\n    <button [disabled]=\"checkoutForm.get('deliveryForm')?.invalid\" class=\"btn btn-primary\" cdkStepperNext>\n        Go to review <i class=\"fa fa-angle-right\"></i>\n    </button>\n</div>","<div class=\"mt-4\" *ngIf=\"checkoutForm\" [formGroup]=\"checkoutForm\" style=\"min-height: 350px\">\n    <div class=\"row\">\n        <div class=\"form-group col-12\" formGroupName=\"paymentForm\">\n            <div class=\"form-floating mb-3\">\n                <input formControlName=\"nameOnCard\" type=\"text\" class=\"form-control\" id=\"nameOnCard\"\n                    [class.is-invalid]=\"checkoutForm.get('paymentForm.nameOnCard')?.touched && checkoutForm.get('paymentForm.nameOnCard')?.invalid\"\n                    placeholder=\"Name On Card\">\n                <label for=\"floatingInput\">Name On Card</label>\n                <div class=\"invalid-feedback\"\n                    *ngIf=\"checkoutForm.get('paymentForm.nameOnCard')?.errors && checkoutForm.get('paymentForm.nameOnCard')?.errors['required'] === true\">\n                    Name On Card is required\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"row mb-3\">\n        <div class=\"col-12\">\n            <span class=\"text-danger\">{{ cardErrors }}</span>\n        </div>\n        <div class=\"col-6\">\n            <div class=\"form-floating\">\n                <div class=\"form-control\" #cardNumber></div>\n                <label>Card Number</label>               \n            </div>\n        </div>\n        <div class=\"col-3\">\n            <div class=\"form-floating\">\n                <div class=\"form-control\" #cardExpiry></div>\n                <label>Card Expiry</label>\n            </div>\n        </div>\n        <div class=\"col-3\">\n            <div class=\"form-floating\">\n                <div class=\"form-control\" #cardCvc></div>\n                <label>Card CVC</label>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"d-flex justify-content-between flex-row mb-5\">\n    <button class=\"btn btn-outline-primary\" cdkStepperPrevious>\n        <i class=\"fa fa-angle-left\"></i> Back to review\n    </button>\n    <button [disabled]=\"loading\" class=\"btn btn-primary\" (click)=\"submitOrder()\">\n        Submit order <i class=\"fa fa-angle-right\"></i>\n        <i class=\"fa fa-spinner fa-spin\" *ngIf=\"loading\"></i>\n    </button>\n</div>\n","import { AfterViewInit, Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { BasketService } from 'src/app/basket/basket.service';\nimport { CheckoutService } from '../checkout.service';\nimport { ToastrService } from 'ngx-toastr';\nimport { IBasket } from 'src/app/shared/models/basket';\nimport { IAddress } from 'src/app/shared/models/user';\nimport { IOrderToCreate } from 'src/app/shared/models/order';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { Stripe, StripeCardCvcElement, StripeCardExpiryElement, StripeCardNumberElement, loadStripe } from '@stripe/stripe-js';\n\n@Component({\n  selector: 'app-checkout-payment',\n  templateUrl: './checkout-payment.component.html',\n  styleUrls: ['./checkout-payment.component.scss']\n})\nexport class CheckoutPaymentComponent implements AfterViewInit {\n  @Input() checkoutForm: FormGroup;\n  @ViewChild('cardNumber', { static: false }) cardNumberElement?: ElementRef;\n  @ViewChild('cardExpiry', { static: false }) cardExpiryElement?: ElementRef;\n  @ViewChild('cardCvc', { static: false }) cardCvcElement?: ElementRef;\n  stripe: Stripe | null = null;\n  cardNumber?: StripeCardNumberElement;\n  cardExpiry?: StripeCardExpiryElement;\n  cardCvc?: StripeCardCvcElement;\n  cardErrors: any;\n  loading = false;\n  constructor(private basketService: BasketService, private checkoutService: CheckoutService,\n    private toastrService: ToastrService, private router: Router) { }\n\n  ngAfterViewInit(): void {\n    loadStripe(\"pk_test_AbTOddWLqoAVYKJWpqlEhYBk00iQ4KJi4D\").then(stripe => {\n      this.stripe = stripe;\n      const elements = this.stripe.elements();\n      if (elements) {\n        // Create card number\n        this.cardNumber = elements.create('cardNumber');\n        this.cardNumber.mount(this.cardNumberElement?.nativeElement);\n        this.cardNumber.on('change', event => {\n          if (event.error) this.cardErrors = event.error.message;\n          else this.cardErrors = null;\n        })\n\n        // Create card expiry\n        this.cardExpiry = elements.create('cardExpiry');\n        this.cardExpiry.mount(this.cardExpiryElement?.nativeElement);\n        this.cardExpiry.on('change', event => {\n          if (event.error) this.cardErrors = event.error.message;\n          else this.cardErrors = null;\n        })\n\n        // Create card cvc\n        this.cardCvc = elements.create('cardCvc');\n        this.cardCvc.mount(this.cardCvcElement?.nativeElement);\n        this.cardCvc.on('change', event => {\n          if (event.error) this.cardErrors = event.error.message;\n          else this.cardErrors = null;\n        })\n      }\n    });\n  }\n\n  async submitOrder() {\n    this.loading = true;\n    const basket = this.basketService.getCurrentBasketValue();\n    try {\n      const createdOrder = await this.createOrder(basket);\n      const paymentResult = await this.confirmPaymentWithStripe(basket);\n      if (paymentResult.paymentIntent) {\n        this.basketService.deleteLocalBasket();\n        const navigationExtras: NavigationExtras = { state: createdOrder };\n        this.router.navigate(['checkout/success'], navigationExtras);\n      } else {\n        this.toastrService.error(paymentResult.error.message);\n      }\n    } catch (error) {\n      console.log(error);\n      this.toastrService.error(error.message);\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  private async confirmPaymentWithStripe(basket: IBasket) {\n    if (!basket) throw new Error('Basket is null');\n    const result = this.stripe.confirmCardPayment(basket.clientSecret, {\n      payment_method: {\n        card: this.cardNumber,\n        billing_details: {\n          name: this.checkoutForm.get('paymentForm')?.get('nameOnCard')?.value\n        }\n      }\n    })\n    if (!result) throw new Error('Problem attempting payment with stripe');\n    return result;\n  }\n\n  private async createOrder(basket: IBasket) {\n    if (!basket) throw new Error('Basket is null');\n    const orderToCreate = this.getOrderToCreate(basket);\n    return this.checkoutService.createOrder(orderToCreate).toPromise();\n  }\n\n  private getOrderToCreate(basket: IBasket): IOrderToCreate {\n    const deliveryMethod = this.checkoutForm?.get('deliveryForm')?.get('deliveryMethod')?.value;\n    const shipToAddress = this.checkoutForm?.get('addressForm')?.value as IAddress;\n    if (!deliveryMethod || !shipToAddress) throw new Error('Problem with Basket');\n    return {\n      basketId: basket.id,\n      deliveryMethodId: deliveryMethod,\n      shipToAddress: shipToAddress\n    }\n  }\n\n}\n","import { CdkStepper } from '@angular/cdk/stepper';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { BasketService } from 'src/app/basket/basket.service';\n\n@Component({\n  selector: 'app-checkout-review',\n  templateUrl: './checkout-review.component.html',\n  styleUrls: ['./checkout-review.component.scss']\n})\nexport class CheckoutReviewComponent implements OnInit {\n  @Input() appStepper?: CdkStepper;\n  constructor(private basketService: BasketService, private toastrService: ToastrService) { }\n\n  ngOnInit(): void {\n  }\n\n  createPaymentIntent() {\n    this.basketService.createPaymentIntent().subscribe(() => {\n      this.appStepper?.next();\n    }, error => this.toastrService.error('Error: ' + error?.message || 'Oops something went wrong please try again.'))\n  }\n\n}\n","<div class=\"mt-4\" style=\"min-height: 350px\">\n    <app-basket-summary [isBasket]=\"false\"></app-basket-summary>\n</div>\n\n<div class=\"d-flex justify-content-between flex-row mb-5\">\n    <button class=\"btn btn-outline-primary\" cdkStepperPrevious>\n        <i class=\"fa fa-angle-left\"></i> Back to delivery\n    </button>\n    <button (click)=\"createPaymentIntent()\" class=\"btn btn-primary\">\n        Go to payment <i class=\"fa fa-angle-right\"></i>\n    </button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CheckoutComponent } from './checkout.component';\nimport { CheckoutSuccessComponent } from './checkout-success/checkout-success.component';\n\nconst routes: Routes = [\n  {\n    path: '', component: CheckoutComponent\n  },\n  {\n    path: 'success', component: CheckoutSuccessComponent\n  }\n];\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class CheckoutRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { IOrder } from 'src/app/shared/models/order';\n\n@Component({\n  selector: 'app-checkout-success',\n  templateUrl: './checkout-success.component.html',\n  styleUrls: ['./checkout-success.component.scss']\n})\nexport class CheckoutSuccessComponent implements OnInit {\n  order: any;\n  constructor(private router: Router) {\n    const navigation = this.router.getCurrentNavigation();\n    this.order = navigation?.extras?.state;\n  }\n\n  ngOnInit(): void {\n  }\n\n  viewOrder() {\n    if (this.order)\n      this.router.navigateByUrl(`orders/${this.order.id}`);\n  }\n\n}\n","<div class=\"container mt-5\" style=\"min-height: 350px\">\n    <div><i class=\"fa fa-check-circle fa-5x text-success\"></i></div>\n    <h2>Thank you your order is confirmed. <span *ngIf=\"order\">To track this order please use your order Id: {{ order.id }}</span></h2>\n    <button (click)=\"viewOrder()\" class=\"btn btn-outline-success\">View your order</button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AccountService } from '../account/account.service';\nimport { IAddress } from '../shared/models/user';\nimport { BasketService } from '../basket/basket.service';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.scss']\n})\nexport class CheckoutComponent implements OnInit {\n  checkoutForm: FormGroup;\n  constructor(public fb: FormBuilder, private accountService: AccountService, private basketService: BasketService) { }\n\n  ngOnInit(): void {\n    this.createCheckoutForm();\n    this.getAddressFormValues();\n    this.getDeliveryFormValue();\n  }\n\n  createCheckoutForm() {\n    // Checkout form\n    this.checkoutForm = this.fb.group({\n      // Containing needed inner forms\n      addressForm: this.fb.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        street: ['', Validators.required],\n        city: ['', Validators.required],\n        state: ['', Validators.required],\n        zipCode: ['', Validators.required],\n      }),\n      deliveryForm: this.fb.group({\n        deliveryMethod: ['', Validators.required]\n      }),\n      paymentForm: this.fb.group({\n        nameOnCard: ['', Validators.required]\n      })\n    })\n  }\n\n  getAddressFormValues() {\n    this.accountService.getUserAddress().subscribe((address: IAddress) => {\n      if (address) {\n        this.checkoutForm.get('addressForm')?.patchValue(address);\n      }\n    })\n  }\n\n  getDeliveryFormValue() {\n    const basket = this.basketService.getCurrentBasketValue();\n    if (basket && basket.deliveryMethodId) {\n      this.checkoutForm.get('deliveryForm')?.get('deliveryMethod')?.patchValue(basket.deliveryMethodId?.toString());\n    }\n  }\n}\n","<div class=\"container mt-5\">\n    <div class=\"row\">\n        <div class=\"col-8\">\n            <app-stepper #appStepper>\n                <cdk-step [label]=\"'Address'\" [completed]=\"checkoutForm.get('addressForm')?.valid\">\n                    <app-checkout-address [checkoutForm]=\"checkoutForm\"></app-checkout-address>\n                </cdk-step>\n                <cdk-step [label]=\"'Delivery'\" [completed]=\"checkoutForm.get('deliveryForm')?.valid\">\n                    <app-checkout-delivery [checkoutForm]=\"checkoutForm\"></app-checkout-delivery>\n                </cdk-step>\n                <cdk-step [label]=\"'Review'\">\n                    <app-checkout-review [appStepper]=\"appStepper\"></app-checkout-review>\n                </cdk-step>\n                <cdk-step [label]=\"'Payment'\" [completed]=\"checkoutForm.get('paymentForm')?.valid\">\n                    <app-checkout-payment [checkoutForm]=\"checkoutForm\"></app-checkout-payment>\n                </cdk-step>\n            </app-stepper>\n        </div>\n        <div class=\"col-4\">\n            <app-order-totals></app-order-totals>\n        </div>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CheckoutComponent } from './checkout.component';\nimport { CheckoutRoutingModule } from './checkout-routing.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { CheckoutAddressComponent } from './checkout-address/checkout-address.component';\nimport { CheckoutDeliveryComponent } from './checkout-delivery/checkout-delivery.component';\nimport { CheckoutPaymentComponent } from './checkout-payment/checkout-payment.component';\nimport { CheckoutReviewComponent } from './checkout-review/checkout-review.component';\nimport { CheckoutSuccessComponent } from './checkout-success/checkout-success.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n\n@NgModule({\n  declarations: [CheckoutComponent, CheckoutAddressComponent, CheckoutDeliveryComponent, CheckoutPaymentComponent, CheckoutReviewComponent, CheckoutSuccessComponent],\n  imports: [\n    CommonModule,\n    CheckoutRoutingModule,\n    SharedModule,\n    ReactiveFormsModule\n  ]\n})\nexport class CheckoutModule { }\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { environment } from 'src/environments/environment';\nimport { IDeliveryMethod } from '../shared/models/deliveryMethod';\nimport { map } from 'rxjs/operators';\nimport { IOrderToCreate } from '../shared/models/order';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CheckoutService {\n  baseUrl = environment.apiUrl;\n  constructor(private http: HttpClient) { }\n\n  getDeliveryMethods() {\n    // const token = localStorage.getItem('token');\n    // let headers = new HttpHeaders();\n    // headers = headers.set('Authorization', `Bearer ${token}`);\n    return this.http.get<IDeliveryMethod[]>(this.baseUrl + 'orders/delivery-methods').pipe(\n      map(dm => {\n        return dm.sort((a, b) => b.price - a.price);\n      })\n    )\n  }\n\n  createOrder(order: IOrderToCreate) {\n    return this.http.post(this.baseUrl + 'orders', order);\n  }\n}\n"]}